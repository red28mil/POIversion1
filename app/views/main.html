<!DOCTYPE html>
<html>
<head>
    <title>{{title}}</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.5.9/dist/css/uikit.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.9/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.9/dist/js/uikit-icons.min.js"></script>
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
            crossorigin="anonymous"
    />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="global.css" />
</head>
<body>
<div class="uk-container uk-margin">
    <div class="uk-child-width-expand uk-flex-center uk-flex-middle uk-text-center" uk-grid>
        <div class="uk-width-auto@m">
            <img width="300" src="image/tra.jpg">
        </div>
        <div class="uk-width-expand@m">
            <h1 class="uk-heading-small">sun sea sand</h1>
            <p>beaches</p>
        </div>
    </div>
</div>
</body>









<head>
    <meta charset="UTF-8">
    <title>Weather API </title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.5.9/dist/css/uikit.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.9/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.9/dist/js/uikit-icons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.0/axios.min.js"></script>
</head>
<body>
<div class="uk-container">
    <div class="uk-flex uk-flex-center uk-flex-middle uk-margin">
        <div class="uk-width-2-3@m uk-card-primary uk-card-default uk-padding-small uk-text-center">
            <div class="title"> Latest Weather </div>
            <div class="uk-text-small">Weather Around the World</div>
        </div>
    </div>
    <div class="uk-width-1-2@m uk-card uk-card-default uk-padding">
        <fieldset class="uk-fieldset">
            <legend class="uk-legend">Enter Location</legend>
            <div class="uk-margin">
                <input id="location-id" class="uk-input" type="text" placeholder="Location">
            </div>
        </fieldset>
        <button onClick="fetchWeather()" id="getweather-btn" class="uk-button uk-button-default">Get Weather</button>
    </div>
    <table id="weather-table" class="uk-table uk-table-divider">
        <caption> Weather Report :</caption>
        <thead>
        <tr>
            <th>Feels Like</th>
            <th>Clouds</th>
            <th>Wind Speed</th>
            <th>Wind Direction</th>
            <th>Visibility</th>
            <th>Humidity</th>
        </tr>
        </thead>
        <tbody>
        <tr></tr>
        </tbody>
    </table>
</div>
<script>const apiKey = "9f3d04327d2714f90779faa7428fbb46";


async function readWeather(location) {
    let weather = null;
    const weatherRequest = `http://api.openweathermap.org/data/2.5/weather?q=${location}&appid=${apiKey}`;
    try {
        const response = await axios.get(weatherRequest);
        if (response.status == 200) {
            weather = response.data;
        }
    } catch (error) {
        console.log(error);
    }
    return weather;
}

function renderCell(row, col, value) {
    const cell = row.insertCell(col);
    cell.innerHTML = value;
}

async function renderWeather(report) {
    const table = document.getElementById("weather-table");
    const row = table.insertRow(-1);
    renderCell(row, 0, report.feelsLike);
    renderCell(row, 1, report.clouds);
    renderCell(row, 2, report.windSpeed);
    renderCell(row, 3, report.windDirection);
    renderCell(row, 4, report.visibility);
    renderCell(row, 5, report.humidity);
}

async function fetchWeather() {
    let result = "Success";
    const location = document.getElementById("location-id").value;
    let weather = await readWeather(location);
    if (weather != null) {
        const report = {
            feelsLike: Math.round(weather.main.feels_like - 273.15),
            clouds: weather.weather[0].description,
            windSpeed: weather.wind.speed,
            windDirection: weather.wind.deg,
            visibility: weather.visibility / 1000,
            humidity: weather.main.humidity,
        };
        renderWeather(report);
    } else {
        result = "Unknown Location";
    }
    resultElement = document.getElementById("result-msg");
    resultElement.textContent = result;
}
</script>
<script src="weather-web.js" type="text/javascript"></script>
</body>
</html>